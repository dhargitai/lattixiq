# Story 6.3: Billing Section - MVP

## Status

Approved

## Story

**As a** user,
**I want** to access my billing information
**so that** I can manage my subscription

## Acceptance Criteria

1. Show current plan status (Free or Premium)
2. If Premium: Link to Stripe customer portal (external)
3. If Free: Link to internal /pricing page
4. Clear visual distinction between plan types
5. Plan badge styling per prototype

## Tasks / Subtasks

- [ ] Create billing section UI (AC: 1, 4, 5)
  - [ ] Add billing section to settings page
  - [ ] Display current plan status
  - [ ] Create plan badge component
  - [ ] Match prototype styling
- [ ] Implement plan badge (AC: 1, 4, 5)
  - [ ] Free plan: Gray background (#F7FAFC)
  - [ ] Premium plan: Gold gradient background
  - [ ] Proper text styling and padding
  - [ ] Rounded corners (16px radius)
- [ ] Add navigation logic (AC: 2, 3)
  - [ ] Check user's subscription status
  - [ ] If Premium: Prepare Stripe portal URL (placeholder)
  - [ ] If Free: Link to /pricing route
  - [ ] Add appropriate click handlers
- [ ] Style billing row (AC: 4, 5)
  - [ ] White card with border
  - [ ] Label: "Subscription"
  - [ ] Show plan badge on right
  - [ ] Add chevron icon for navigation
- [ ] Handle loading states (AC: 1)
  - [ ] Show skeleton while loading plan
  - [ ] Handle error states gracefully
  - [ ] Default to "Free" if data unavailable
- [ ] Write tests (AC: 1, 2, 3)
  - [ ] Test plan display logic
  - [ ] Test navigation behavior
  - [ ] Test badge styling

## Dev Notes

### Data Models

User subscription data:

```typescript
interface UserAccount {
  subscription: {
    status: "free" | "premium";
    stripeCustomerId?: string;
  };
}
```

[Source: epic-6-settings-preferences.md#data-model]

### Component Specifications

From prototype:

- Plan badge for Free: Background #F7FAFC, text #4A5568
- Plan badge for Premium: Gradient background (gold), darker text
- Badge styling: padding 4px 12px, border-radius 16px
- Font: 14px, weight 600
  [Source: prototypes/settings.html#plan-badge]

### File Locations

- Component: `/components/settings/BillingSection.tsx`
- Integrate into: `/app/(app)/settings/page.tsx`
  [Source: architecture/10-unified-project-structure.md]

### Technical Constraints

- Stripe portal URL generation will be added later
- For now, use placeholder URL or disabled state
- /pricing page will be created in separate epic
  [Source: epic-6-settings-preferences.md#open-questions]

## Testing

### Testing Standards

- Test file: `/tests/unit/settings/billing-section.test.tsx`
- Mock user subscription data
- Test both free and premium states
  [Source: architecture/12-coding-standards.md#testing-standards]

## Change Log

| Date       | Version | Description                | Author       |
| ---------- | ------- | -------------------------- | ------------ |
| 2025-08-06 | 1.0     | Initial MVP story creation | Scrum Master |

## Dev Agent Record

### Agent Model Used

_To be filled by Dev Agent_

### Debug Log References

_To be filled by Dev Agent_

### Completion Notes List

_To be filled by Dev Agent_

### File List

_To be filled by Dev Agent_

## QA Results

_To be filled by QA Agent_
