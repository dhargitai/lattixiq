# Story 3.1: Create My Toolkit Hub Layout

## Status

Approved

## Story

**As a** returning user,
**I want** a personalized dashboard,
**so that** I can see my progress and continue learning

## Acceptance Criteria

1. Hub shows personalized greeting
2. Active roadmap card with progress
3. Quick stats (streak, total learned, etc.)
4. Navigation to all key sections
5. Mobile-optimized responsive design
6. Empty states for new users

## Tasks / Subtasks

- [ ] Create toolkit page route and layout (AC: 1, 4, 5)
  - [ ] Create `/app/(app)/toolkit/page.tsx` file
  - [ ] Implement responsive layout container matching prototype design
  - [ ] Add header with personalized greeting component
  - [ ] Set up mobile-optimized viewport constraints
- [ ] Build header and stats section (AC: 1, 3)
  - [ ] Create `HeaderGreeting` component showing user's personalized welcome
  - [ ] Implement `QuickStats` component with streak, total learned, completion rate
  - [ ] Fetch user progress data from Supabase
  - [ ] Add loading skeleton states for stats
- [ ] Implement active roadmap card component (AC: 2)
  - [ ] Create `/components/features/toolkit/ActiveRoadmapCard.tsx`
  - [ ] Show roadmap title, goal, and progress visualization
  - [ ] Implement progress bar or step indicator (e.g., "3/7 steps")
  - [ ] Display current step preview with title
  - [ ] Add "Continue Learning" CTA button
  - [ ] Show time since last activity
- [ ] Create quick action buttons section (AC: 4)
  - [ ] Create `/components/features/toolkit/QuickActions.tsx`
  - [ ] Add "Start New Roadmap" button
  - [ ] Add "Today's Reflection" button (conditional on active plan)
  - [ ] Add "Explore Random Model" button
  - [ ] Implement conditional display logic based on user state
- [ ] Build section navigation cards (AC: 4)
  - [ ] Create navigation cards for key sections
  - [ ] Add "Learned Models" card with count
  - [ ] Add "Completed Roadmaps" card with count
  - [ ] Add "Application Log" card with recent entry preview
  - [ ] Implement proper routing to each section
- [ ] Implement empty states (AC: 6)
  - [ ] Create empty state component for new users
  - [ ] Design welcome message and onboarding prompt
  - [ ] Add illustration or icon for visual appeal
  - [ ] Include "Start Your First Roadmap" CTA
- [ ] Add data fetching and state management (AC: 2, 3)
  - [ ] Create data fetching logic for user stats
  - [ ] Fetch active roadmap with current progress
  - [ ] Calculate streak and completion metrics
  - [ ] Handle loading and error states
- [ ] Implement responsive design (AC: 5)
  - [ ] Test and optimize for mobile viewports
  - [ ] Ensure touch-friendly interaction targets
  - [ ] Implement responsive grid layout
  - [ ] Test on various screen sizes
- [ ] Write integration tests
  - [ ] Test data fetching and display
  - [ ] Test navigation to different sections
  - [ ] Test empty state scenarios
  - [ ] Test loading states

## Dev Notes

### Previous Story Insights

No previous stories in Epic 3 - this is the first story of the epic.

### Data Models

The following data models will be used [Source: architecture/3-data-models.md]:

**User** (`users` table):

- `id`: string - Primary key
- `email`: string | null
- `created_at`: string | null
- Fields use snake_case naming

**Roadmap** (`roadmaps` table):

- `id`: string
- `user_id`: string - Foreign key to users
- `goal_description`: string | null
- `status`: 'active' | 'completed' | null
- `created_at`: string | null
- `completed_at`: string | null

**RoadmapStep** (`roadmap_steps` table):

- `id`: string
- `roadmap_id`: string
- `knowledge_content_id`: string
- `status`: 'locked' | 'unlocked' | 'completed' | null
- `order`: number
- `plan_created_at`: string | null

**ApplicationLog** (`application_logs` table):

- `id`: string
- `user_id`: string
- `roadmap_step_id`: string
- `created_at`: string | null
- `effectiveness_rating`: number | null

### API Specifications

No new API endpoints required - will use Supabase client directly for data fetching [Source: architecture/5-system-components.md#frontend-client].

### Component Specifications

Based on the component architecture [Source: architecture/8-frontend-architecture.md#component-architecture]:

Components should be organized as:

- `/components/features/toolkit/` - Feature-specific components
- `/components/shared/` - Reusable app components
- `/components/ui/` - shadcn/ui base components

Component template to follow:

```tsx
import * as React from "react";
import { cn } from "@/lib/utils";
// Use React.forwardRef pattern
// Define TypeScript interfaces for props
// Follow functional programming principles
```

### Frontend Alignment

Based on prototype analysis [Source: prototypes/my-toolkit.html]:

- Header with title "My Toolkit" and help icon
- Testimonial card with gradient background (conditional display)
- Active roadmap card with progress visualization
- Quick stats section showing user metrics
- Navigation cards in grid layout
- Bottom navigation for mobile (handled by shared Navigation component)

UI Components from shadcn/ui to use:

- Card, CardHeader, CardContent, CardTitle
- Button with appropriate variants
- Progress or custom step indicator
- Skeleton for loading states

### File Locations

Based on project structure [Source: architecture/10-unified-project-structure.md]:

- Page: `/app/(app)/toolkit/page.tsx`
- Components: `/components/features/toolkit/`
- Shared state: `/lib/stores/` (if needed)
- Types: Import from `@/lib/supabase/types`

### Testing Requirements

[Source: architecture/11-testing-strategy.md]:

- Integration tests in `/tests/integration/`
- Use Vitest and React Testing Library
- Test both happy and unhappy paths
- Mock Supabase calls in tests
- Test file naming: `*.test.ts` or `*.test.tsx`

### Technical Constraints

[Source: architecture/2-tech-stack.md]:

- Next.js ~15.0.0 with App Router
- React 19.1.0
- TypeScript ~5.5.3
- shadcn/ui ~2.0.0 components
- Tailwind CSS ~4.0.0 for styling
- Zustand ~4.5.2 for global state (if needed)
- Supabase client for data fetching

### Coding Standards

[Source: architecture/12-coding-standards.md]:

- Use functional programming principles (immutability, pure functions)
- Components: PascalCase
- Functions/variables: camelCase
- Database fields: snake_case (e.g., `user_id`, `created_at`)
- Import database types from `@/lib/supabase/types`
- Never create duplicate interfaces for database schemas

## Testing

### Testing Standards

- Test files location: `/tests/integration/toolkit/`
- Framework: Vitest with React Testing Library
- Follow TDD approach with Red-Green-Refactor cycle
- Mock all Supabase calls using Vitest mocking
- Test both successful scenarios and error cases
- Ensure minimum text validation on form inputs

## Change Log

| Date       | Version | Description            | Author   |
| ---------- | ------- | ---------------------- | -------- |
| 2025-01-06 | 1.0     | Initial story creation | SM Agent |

## Dev Agent Record

### Agent Model Used

[To be populated by dev agent]

### Debug Log References

[To be populated by dev agent]

### Completion Notes List

[To be populated by dev agent]

### File List

[To be populated by dev agent]

## QA Results

[To be populated by QA agent]
