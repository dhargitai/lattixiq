# Story 3.1: Create My Toolkit Hub Layout

## Status

Ready for Review

## Story

**As a** returning user,
**I want** a personalized dashboard,
**so that** I can see my progress and continue learning

## Acceptance Criteria

1. Hub shows personalized greeting
2. Active roadmap card with progress
3. Quick stats (streak, total learned, etc.)
4. Navigation to all key sections
5. Mobile-optimized responsive design
6. Empty states for new users

## Tasks / Subtasks

- [x] Create toolkit page route and layout (AC: 1, 4, 5)
  - [x] Create `/app/(app)/toolkit/page.tsx` file
  - [x] Implement responsive layout container matching prototype design
  - [x] Add header with personalized greeting component
  - [x] Set up mobile-optimized viewport constraints
- [x] Build header and stats section (AC: 1, 3)
  - [x] Create `HeaderGreeting` component showing user's personalized welcome
  - [x] Implement `QuickStats` component with streak, total learned, completion rate
  - [x] Fetch user progress data from Supabase
  - [x] Add loading skeleton states for stats
- [x] Implement active roadmap card component (AC: 2)
  - [x] Create `/components/features/toolkit/ActiveRoadmapCard.tsx`
  - [x] Show roadmap title, goal, and progress visualization
  - [x] Implement progress bar or step indicator (e.g., "3/7 steps")
  - [x] Display current step preview with title
  - [x] Add "Continue Learning" CTA button
  - [x] Show time since last activity
- [x] Create quick action buttons section (AC: 4)
  - [x] Create `/components/features/toolkit/QuickActions.tsx`
  - [x] Add "Start New Roadmap" button
  - [x] Add "Today's Reflection" button (conditional on active plan)
  - [x] Add "Explore Random Model" button
  - [x] Implement conditional display logic based on user state
- [x] Build section navigation cards (AC: 4)
  - [x] Create navigation cards for key sections
  - [x] Add "Learned Models" card with count
  - [x] Add "Completed Roadmaps" card with count
  - [x] Add "Application Log" card with recent entry preview
  - [x] Implement proper routing to each section
- [x] Implement empty states (AC: 6)
  - [x] Create empty state component for new users
  - [x] Design welcome message and onboarding prompt
  - [x] Add illustration or icon for visual appeal
  - [x] Include "Start Your First Roadmap" CTA
- [x] Add data fetching and state management (AC: 2, 3)
  - [x] Create data fetching logic for user stats
  - [x] Fetch active roadmap with current progress
  - [x] Calculate streak and completion metrics
  - [x] Handle loading and error states
- [x] Implement responsive design (AC: 5)
  - [x] Test and optimize for mobile viewports
  - [x] Ensure touch-friendly interaction targets
  - [x] Implement responsive grid layout
  - [x] Test on various screen sizes
- [x] Write integration tests
  - [x] Test data fetching and display
  - [x] Test navigation to different sections
  - [x] Test empty state scenarios
  - [x] Test loading states

## Dev Notes

### Previous Story Insights

No previous stories in Epic 3 - this is the first story of the epic.

### Data Models

The following data models will be used [Source: architecture/3-data-models.md]:

**User** (`users` table):

- `id`: string - Primary key
- `email`: string | null
- `created_at`: string | null
- Fields use snake_case naming

**Roadmap** (`roadmaps` table):

- `id`: string
- `user_id`: string - Foreign key to users
- `goal_description`: string | null
- `status`: 'active' | 'completed' | null
- `created_at`: string | null
- `completed_at`: string | null

**RoadmapStep** (`roadmap_steps` table):

- `id`: string
- `roadmap_id`: string
- `knowledge_content_id`: string
- `status`: 'locked' | 'unlocked' | 'completed' | null
- `order`: number
- `plan_created_at`: string | null

**ApplicationLog** (`application_logs` table):

- `id`: string
- `user_id`: string
- `roadmap_step_id`: string
- `created_at`: string | null
- `effectiveness_rating`: number | null

### API Specifications

No new API endpoints required - will use Supabase client directly for data fetching [Source: architecture/5-system-components.md#frontend-client].

### Component Specifications

Based on the component architecture [Source: architecture/8-frontend-architecture.md#component-architecture]:

Components should be organized as:

- `/components/features/toolkit/` - Feature-specific components
- `/components/shared/` - Reusable app components
- `/components/ui/` - shadcn/ui base components

Component template to follow:

```tsx
import * as React from "react";
import { cn } from "@/lib/utils";
// Use React.forwardRef pattern
// Define TypeScript interfaces for props
// Follow functional programming principles
```

### Frontend Alignment

Based on prototype analysis [Source: prototypes/my-toolkit.html]:

- Header with title "My Toolkit" and help icon
- Testimonial card with gradient background (conditional display)
- Active roadmap card with progress visualization
- Quick stats section showing user metrics
- Navigation cards in grid layout
- Bottom navigation for mobile (handled by shared Navigation component)

UI Components from shadcn/ui to use:

- Card, CardHeader, CardContent, CardTitle
- Button with appropriate variants
- Progress or custom step indicator
- Skeleton for loading states

### File Locations

Based on project structure [Source: architecture/10-unified-project-structure.md]:

- Page: `/app/(app)/toolkit/page.tsx`
- Components: `/components/features/toolkit/`
- Shared state: `/lib/stores/` (if needed)
- Types: Import from `@/lib/supabase/types`

### Testing Requirements

[Source: architecture/11-testing-strategy.md]:

- Integration tests in `/tests/integration/`
- Use Vitest and React Testing Library
- Test both happy and unhappy paths
- Mock Supabase calls in tests
- Test file naming: `*.test.ts` or `*.test.tsx`

### Technical Constraints

[Source: architecture/2-tech-stack.md]:

- Next.js ~15.0.0 with App Router
- React 19.1.0
- TypeScript ~5.5.3
- shadcn/ui ~2.0.0 components
- Tailwind CSS ~4.0.0 for styling
- Zustand ~4.5.2 for global state (if needed)
- Supabase client for data fetching

### Coding Standards

[Source: architecture/12-coding-standards.md]:

- Use functional programming principles (immutability, pure functions)
- Components: PascalCase
- Functions/variables: camelCase
- Database fields: snake_case (e.g., `user_id`, `created_at`)
- Import database types from `@/lib/supabase/types`
- Never create duplicate interfaces for database schemas

## Testing

### Testing Standards

- Test files location: `/tests/integration/toolkit/`
- Framework: Vitest with React Testing Library
- Follow TDD approach with Red-Green-Refactor cycle
- Mock all Supabase calls using Vitest mocking
- Test both successful scenarios and error cases
- Ensure minimum text validation on form inputs

## Change Log

| Date       | Version | Description                   | Author    |
| ---------- | ------- | ----------------------------- | --------- |
| 2025-01-06 | 1.0     | Initial story creation        | SM Agent  |
| 2025-01-06 | 1.1     | Story implementation complete | Dev Agent |

## Dev Agent Record

### Agent Model Used

claude-opus-4-1-20250805

### Debug Log References

- Created toolkit page route with responsive layout
- Implemented all required components matching prototype design
- Added comprehensive data fetching logic with Supabase integration
- Included loading states and error handling
- All tests passing

### Completion Notes List

- Successfully implemented all acceptance criteria
- Components match prototype design closely
- Responsive design tested for mobile viewports
- Empty state handled for new users
- Navigation to all key sections working
- Integration tests covering all major functionality

### File List

- `/app/(app)/toolkit/page.tsx` - Main toolkit page route
- `/lib/db/toolkit.ts` - Data fetching logic and types
- `/components/features/toolkit/HeaderGreeting.tsx` - Welcome greeting component
- `/components/features/toolkit/QuickStats.tsx` - User statistics display
- `/components/features/toolkit/ActiveRoadmapCard.tsx` - Active roadmap card with progress
- `/components/features/toolkit/QuickActions.tsx` - Quick action buttons
- `/components/features/toolkit/NavigationCards.tsx` - Navigation section cards
- `/components/features/toolkit/EmptyState.tsx` - Empty state for new users
- `/tests/integration/toolkit/toolkit.test.tsx` - Integration tests

## QA Results

[To be populated by QA agent]
