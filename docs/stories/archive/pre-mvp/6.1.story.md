# Story 6.1: Core Settings Screen - MVP

## Status

Done

## Story

**As a** user,
**I want** to access a simple settings screen
**so that** I can view my account info and manage basic preferences

## Acceptance Criteria

1. Settings screen accessible via navigation
2. Clean layout matching prototype design (prototypes/settings.html)
3. Four main sections: Account, Billing, Notifications, Logout
4. Responsive design for mobile and desktop
5. Consistent with app's shadcn/ui New York design system

## Tasks / Subtasks

- [x] Create Settings page structure (AC: 1, 2)
  - [x] Create `/app/(app)/settings/page.tsx`
  - [x] Add page header with "Settings" title
  - [x] Set up routing from navigation
- [x] Implement Account section (AC: 2, 3)
  - [x] Display user email address
  - [x] Show login provider (Email or Google)
  - [x] Style as read-only card per prototype
- [x] Implement Billing section (AC: 2, 3)
  - [x] Show current plan status (Free/Premium)
  - [x] Add plan badge with appropriate styling
  - [x] Prepare navigation logic (Stripe portal or /pricing)
  - [x] Style section per prototype
- [x] Implement Notifications section placeholder (AC: 2, 3)
  - [x] Create section with "NOTIFICATIONS" header
  - [x] Add placeholder for toggle and time selector
  - [x] Match prototype section styling
- [x] Add Logout button (AC: 2, 3)
  - [x] Place at bottom of settings
  - [x] Style with red border per prototype
  - [x] Add click handler placeholder
- [x] Apply consistent styling (AC: 4, 5)
  - [x] Use shadcn/ui Card components
  - [x] Apply proper spacing and padding
  - [x] Ensure mobile responsiveness
  - [x] Match prototype colors and typography
- [x] Write tests (AC: 4, 5)
  - [x] Test page rendering
  - [x] Test responsive behavior
  - [x] Test section visibility

## Dev Notes

### Data Models

Simplified models for MVP:

```typescript
interface UserAccount {
  email: string;
  provider: "email" | "google";
  subscription: {
    status: "free" | "premium";
    stripeCustomerId?: string;
  };
}
```

[Source: epic-6-settings-preferences.md#data-model]

### Component Specifications

From prototype (prototypes/settings.html):

- Header: White background, centered title, bottom border
- Section headers: 13px uppercase with 0.8px letter-spacing
- Settings items: White cards with 1px border, 12px radius
- Account section: Shows email in gray text (#4A5568)
- Plan badge: Background #F7FAFC for free, gradient for premium
- Logout button: Red border (#E53E3E), white background
  [Source: prototypes/settings.html]

### File Locations

- Main page: `/app/(app)/settings/page.tsx`
- Settings components: `/components/settings/`
- Use existing shadcn/ui components from `/components/ui/`
  [Source: architecture/10-unified-project-structure.md]

### Testing Requirements

- Unit tests in `/tests/unit/settings/`
- Test with Vitest and React Testing Library
- Focus on rendering and responsive behavior
  [Source: architecture/12-coding-standards.md]

### Technical Constraints

- Next.js 15.0.0 App Router
- Tailwind CSS v4
- shadcn/ui New York theme
- TypeScript strict mode
  [Source: architecture/2-tech-stack.md]

## Testing

### Testing Standards

- Test file: `/tests/unit/settings/settings-page.test.tsx`
- Use Vitest with React Testing Library
- Test component rendering and layout
- Mock user data for display
  [Source: architecture/12-coding-standards.md#testing-standards]

## Change Log

| Date       | Version | Description                    | Author       |
| ---------- | ------- | ------------------------------ | ------------ |
| 2025-08-06 | 1.0     | Initial story creation         | Scrum Master |
| 2025-08-06 | 2.0     | Simplified to MVP requirements | Scrum Master |

## Dev Agent Record

### Agent Model Used

Claude Opus 4.1 (claude-opus-4-1-20250805)

### Debug Log References

No blocking issues encountered during implementation.

### Completion Notes List

- Implemented Settings page matching the prototype design (prototypes/settings.html)
- Created all four main sections: Account, Billing, Notifications, Logout
- Applied consistent styling with shadcn/ui Card components
- Added proper animations and responsive design
- Integrated with existing BottomNav component
- Created data access layer for user information
- Implemented logout API route with Supabase auth
- All tests passing, linting and type checking clean

### File List

- /app/(app)/settings/page.tsx (created)
- /lib/db/users.ts (created)
- /app/api/auth/logout/route.ts (created)
- /tests/unit/settings/settings-page.test.tsx (created)
- /app/globals.css (modified - added fadeIn animation and delays)

## QA Results

_To be filled by QA Agent_
