-- Seed help content for all application screens
-- This migration adds comprehensive help content for the LattixIQ application screens

INSERT INTO content_blocks (content_id, content, metadata, published) VALUES

-- My Toolkit Screen Help
('toolkit-screen-help', 
'## Welcome to Your Rationality Toolkit

Your **My Toolkit** screen is your personal command center for building better thinking habits. This is where your journey toward clearer reasoning and wiser decisions begins and continues.

### What You''ll Find Here

**Active Roadmap Card**
- Shows your current learning journey with progress tracking
- Quick access to continue where you left off
- Visual progress indicators to keep you motivated

**Quick Stats**
- Total completed roadmaps
- Mental models learned and mastered
- Your growing knowledge base at a glance

**Quick Actions**
- **Create New Roadmap**: Start a fresh learning journey for a specific goal
- **View Application Log**: Review all your reflections and insights
- **Browse Settings**: Customize notifications and preferences

### Making the Most of Your Toolkit

**ğŸ¯ Focus on One Roadmap at a Time**
While it''s tempting to start multiple journeys, research shows focused learning leads to deeper mastery. Complete your current roadmap before starting a new one.

**ğŸ“Š Celebrate Progress**
Each completed step represents real growth in your thinking abilities. Take a moment to appreciate how far you''ve come.

**ğŸ”„ Regular Check-ins**
Visit your toolkit daily, even if just for a quick look. Consistent engagement builds lasting habits.

### Your Next Steps

1. **Active Roadmap?** Continue your current learning journey
2. **No Active Roadmap?** Click "Create New Roadmap" to start building better thinking patterns
3. **Completed a Roadmap?** Review your Application Log to see patterns in your growth

### Troubleshooting

**Can''t see my progress?** Refresh the page - we fetch the latest data on each visit.

**Missing a completed roadmap?** Check that you completed the final reflection step for each mental model.

Remember: Every expert was once a beginner. Your toolkit grows stronger with each step you take.', 
'{"category": "screen_help", "screen": "toolkit"}', 
true),

-- Settings Screen Help
('settings-screen-help', 
'## Customize Your Learning Experience

Your **Settings** screen lets you personalize LattixIQ to fit your lifestyle and learning preferences. Small adjustments here can make a big difference in your success.

### Key Settings Explained

**ğŸ“± Push Notifications**
- Enable browser notifications to stay connected to your learning
- Perfect for gentle reminders when you''ve planned to practice a mental model
- Can be enabled/disabled anytime based on your preferences

**â° Daily Reminder Time**
- Set when you''d like to receive your practice reminders
- Choose a time when you''re typically free to reflect
- Most effective when aligned with an existing daily routine

**ğŸ”” Notification Preferences**
- Fine-tune which types of reminders you receive
- Balance staying engaged without feeling overwhelmed
- Customize based on your learning style and schedule

### Optimization Tips

**ğŸŒ… Morning Reminders**
Many users find morning reminders most effective - your mind is fresh and ready for intentional thinking.

**ğŸ“± Browser Permissions**
Make sure your browser allows notifications from LattixIQ for the best experience.

**ğŸ¯ Consistency Over Perfection**
Regular, smaller practice sessions are more valuable than sporadic intensive ones.

### Account & Subscription

**Free Account Benefits**
- Complete your first full roadmap
- Access to core learning features
- Application log for tracking progress

**Premium Features** *(Coming Soon)*
- Unlimited roadmaps for any goal
- Advanced personal insights and analytics
- Priority access to new mental models

### Privacy & Data

Your journal entries and personal information are encrypted and secure. We use your reflection data only to improve your personalized learning experience.

### Need Help?

Having trouble with notifications? Check your browser''s notification settings and ensure LattixIQ has permission to send them.', 
'{"category": "screen_help", "screen": "settings"}', 
true),

-- Roadmap Screen Help
('roadmap-screen-help', 
'## Your Learning Journey Roadmap

This is where the magic happens - your personalized path to stronger thinking skills, created specifically for your goal. Each step builds on the last, creating a powerful foundation for clearer reasoning.

### Understanding Your Roadmap

**ğŸ¯ Your Goal**
At the top, you''ll see the specific challenge or growth area you''re working on. Every mental model below was carefully selected to help you achieve this goal.

**ğŸ§  Mental Models & Cognitive Biases**
Each card represents a powerful thinking tool:
- **Mental Models**: Frameworks for better decision-making
- **Cognitive Biases**: Common thinking traps to recognize and avoid
- **Step Numbers**: Your logical progression path

**ğŸ”’ Progressive Unlocking**
Later steps appear blurred until you complete earlier ones. This ensures you build a solid foundation before advancing to more complex concepts.

### The Learning Process

**Learn â†’ Plan â†’ Reflect**
Each step follows this proven pattern:

1. **Learn**: Understand the concept deeply
2. **Plan**: Create specific ways to apply it in your life  
3. **Reflect**: Journal about your real-world experience

**ğŸ† Step Completion**
A step is complete when you''ve submitted a reflection. The next step then unlocks automatically.

### Success Strategies

**ğŸ“š Take Your Time**
There''s no rush. Deep understanding matters more than speed. Most users spend 2-3 days on each step.

**ğŸ¯ Real Application**
The power comes from actually using these tools in your daily life, not just understanding them intellectually.

**ğŸ“ Honest Reflection**
Your journal entries are for you. Honest assessment helps you grow faster.

### Navigation Tips

**ğŸ”„ Revisit Completed Steps**
Click any completed step to review the content. Reinforcement strengthens learning.

**ğŸ“± Mobile Friendly**
Your roadmap works great on phone, tablet, or desktop. Learn anywhere, anytime.

**ğŸ  Back to Toolkit**
The home icon returns you to your main toolkit screen.

### Troubleshooting

**Step won''t unlock?** Make sure you''ve completed the reflection for the previous step.

**Can''t find a step?** Scroll down - roadmaps can be 5-7 steps long.

Remember: This roadmap was designed specifically for your goal. Trust the process and stay committed to the journey.', 
'{"category": "screen_help", "screen": "roadmap"}', 
true),

-- Learn Screen Help
('learn-screen-help', 
'## Deep Learning for Better Thinking

Welcome to the **Learn** screen - where you''ll discover powerful mental tools that can transform how you think and make decisions. This isn''t just reading; it''s equipping yourself with practical wisdom.

### What You''re Learning

**ğŸ§  Mental Models**
These are thinking frameworks used by the world''s best decision-makers. Each model gives you a new lens for understanding reality.

**ğŸ­ Cognitive Biases**
These are systematic errors in thinking that affect everyone. Awareness is the first step to overcoming them.

**ğŸ¯ Goal Connection**
Every concept you see here was specifically chosen for your stated goal. This isn''t random education - it''s targeted growth.

### How to Learn Effectively

**ğŸ“– Read Actively**
Don''t just skim. Ask yourself:
- "How does this apply to my situation?"
- "When have I seen this pattern before?"
- "What would change if I used this thinking?"

**ğŸ¤” Make Connections**
Link new concepts to your existing knowledge and experiences. The stronger these connections, the better you''ll remember and use the material.

**ğŸ“ Take Notes** *(Optional)*
While not required, jotting down key insights can help retention.

### Key Content Elements

**ğŸ“š Core Explanation**
Clear, concise description of the concept without unnecessary jargon.

**ğŸ’¡ Real-World Examples**
See how this thinking tool applies in actual situations.

**ğŸ”§ Practical Applications**
Specific ways to use this knowledge in your daily life.

### Your Learning Journey

**Current Step**: You''re building one piece of a comprehensive thinking toolkit.

**Next: Plan Screen**: Where you''ll create specific ways to apply what you''ve learned.

**Progress Tracking**: Your learning is automatically saved as you complete each section.

### Success Tips

**ğŸ¯ Quality Over Speed**
Better to deeply understand one concept than to superficially know many.

**ğŸ”„ Connect to Your Goal**
Constantly ask how this knowledge helps with your specific challenge.

**ğŸ’­ Visualize Application**
Imagine yourself using this mental tool in real situations.

### Ready to Continue?

When you feel confident about the concept, move to the **Plan** screen to create your personal application strategy.

Remember: Knowledge without application is just trivia. The real value comes when you put these tools to work in your life.', 
'{"category": "screen_help", "screen": "learn"}', 
true),

-- Plan Screen Help
('plan-screen-help', 
'## Turn Knowledge into Action

The **Plan** screen is where learning becomes living. Here, you''ll create specific, actionable plans to apply your new mental tools in real-world situations.

### Two Types of Plans

**ğŸ¯ Implementation Intentions (Mental Models)**
Concrete plans for how you''ll use a thinking framework:
- "When X situation occurs, I will use Y mental model"
- "In Z context, I will apply this decision-making tool"
- "During my morning routine, I will practice this thinking pattern"

**ğŸ•µï¸ Spotting Missions (Cognitive Biases)**  
Specific plans to notice and avoid thinking traps:
- "I will watch for this bias when making decisions about..."
- "In meetings, I''ll check whether this bias is affecting our thinking"
- "Before important choices, I''ll ask myself if this bias is present"

### Creating Effective Plans

**ğŸ¯ Be Specific**
Vague: "I''ll use this mental model"
Better: "When deciding whether to take on new projects, I''ll use the Opportunity Cost framework to compare options"

**â° Set Clear Triggers**  
- "When I feel stressed about deadlines..."
- "During my weekly planning session..."
- "Before responding to criticism..."

**ğŸ“ Choose Real Contexts**
Link your plan to actual situations you encounter regularly.

### The Science Behind Planning

**Implementation Intentions** are proven to dramatically increase follow-through. By pre-deciding when and how you''ll act, you remove decision fatigue from the equation.

**ğŸ§  How It Works:**
1. Identifies specific triggers in your environment
2. Links those triggers to specific actions  
3. Makes behavior more automatic and reliable

### Reminder System

**ğŸ”” Daily Notifications** *(Optional)*
Enable gentle reminders to practice your plan. These work best when:
- Set for consistent times (e.g., morning coffee, lunch break)
- Aligned with your natural routine
- Not overwhelming (one reminder per active plan)

### Plan Quality Tips

**âœ… Good Plans Are:**
- Specific about when and where
- Connected to real situations you face
- Actionable (you can actually do them)
- Linked to your original goal

**âŒ Avoid Plans That Are:**
- Too vague or general
- Based on perfect conditions
- Overly ambitious for starting out

### Your Next Step

Once you''ve created your plan, it''s time to live it! Go practice applying this mental tool, then return to complete your reflection.

**â­ï¸ Ready to Reflect?**
If you''ve been practicing your plan for at least a day or two, move to the Reflect screen to capture your insights and unlock the next step.

Remember: The gap between knowing and doing is bridged by planning. Your specific intention is the key to real change.', 
'{"category": "screen_help", "screen": "plan"}', 
true),

-- Reflect Screen Help
('reflect-screen-help', 
'## Capture Your Learning Journey

The **Reflect** screen is where growth becomes permanent. By thoughtfully examining your experiences, you transform temporary insights into lasting wisdom.

### Why Reflection Matters

**ğŸ§  Neuroplasticity**
Reflection literally rewires your brain. When you consciously review experiences, you strengthen the neural pathways that support better thinking.

**ğŸ“ˆ Compound Learning**
Each reflection builds on previous ones, creating exponential growth over time.

**ğŸ¯ Goal Alignment**
Regular reflection keeps you connected to your original goal and shows how each step contributes to your progress.

### What to Reflect On

**ğŸ“ Your Application Experience**
- When did you try to use the mental model or spot the bias?
- What was the situation and context?
- How did it feel to apply this new thinking tool?

**ğŸ’¡ Key Insights**
- What surprised you about using this concept?
- How was it different from your usual thinking patterns?
- What connections did you make to other areas of your life?

**ğŸ¯ Practical Impact**
- Did this tool help with your stated goal?
- What would you do differently next time?
- How might you use this concept going forward?

### Writing Effective Reflections

**ğŸŒŸ Quality Over Quantity**
A few thoughtful sentences are better than long, unfocused rambling.

**ğŸ’¯ Honesty First**
This is for your growth, not for grades. Honest assessment leads to real improvement.

**ğŸ” Specific Examples**
"I used the mental model when deciding about a work project" is better than "I found it useful."

### Reflection Prompts

**For Mental Models:**
- "When I applied [Model Name] to [specific situation], I discovered..."
- "This thinking framework changed my approach to..."
- "The most valuable aspect of this mental tool was..."

**For Cognitive Biases:**
- "I caught myself falling into [Bias Name] when..."
- "Awareness of this bias helped me..."
- "I noticed this thinking pattern affecting..."

### Your Learning Data

**ğŸ”’ Privacy First**
Your reflections are private and secure. We use them only to improve your personalized learning experience.

**ğŸ“Š Progress Tracking**
Each reflection unlocks the next step in your roadmap and contributes to your overall learning analytics.

**ğŸ“– Application Log**
All your reflections are saved in your Application Log, creating a searchable record of your growth journey.

### Completing Your Reflection

**âœ… Submission Requirements**
- At least a few thoughtful sentences about your experience
- Specific examples of application or attempts to apply
- Honest assessment of effectiveness

**ğŸ† Step Completion**
Once you submit your reflection, the next step in your roadmap unlocks automatically.

### Success Strategies

**â° Reflect Soon After Application**
The sooner you reflect after applying a concept, the more accurate and valuable your insights will be.

**ğŸ”„ Regular Reviews**
Occasionally revisit old reflections to see patterns and progress in your thinking development.

**ğŸ¯ Connect to Goals**
Always tie your reflections back to your original learning goal.

Remember: Reflection is where knowledge becomes wisdom. Take your time and be honest with yourself.', 
'{"category": "screen_help", "screen": "reflect"}', 
true),

-- New Roadmap Screen Help
('new-roadmap-screen-help', 
'## Create Your Personalized Learning Journey  

Welcome to the **New Roadmap** creation screen - where AI meets personal growth to design a learning path perfectly tailored to your specific goals and challenges.

### How Roadmap Generation Works

**ğŸ¯ Goal Definition**
Start by clearly describing what you want to achieve or overcome:
- "I want to stop procrastinating on important projects"
- "I need to make better decisions under pressure"
- "I struggle with overthinking and analysis paralysis"

**ğŸ¤– AI-Powered Matching**
Our system uses advanced semantic analysis to:
1. Convert your goal into mathematical representations
2. Match it against 100+ mental models and cognitive biases
3. Select the 5-7 most relevant thinking tools for your specific challenge

**ğŸ—ºï¸ Intelligent Sequencing**
The AI arranges your selected concepts in optimal learning order:
- Foundational concepts first
- Building complexity gradually
- Logical progression toward your goal

### Writing Effective Goals

**âœ… Good Goal Examples:**
- "I want to overcome imposter syndrome at work"
- "I need better frameworks for making investment decisions"
- "I struggle with confirmation bias when researching"
- "I want to stop letting perfectionism paralyze me"

**âŒ Avoid Goals That Are:**
- Too vague: "I want to think better"
- Too broad: "I want to improve everything"
- Already very specific: "I want to learn the Pareto Principle"

### Goal Categories

**ğŸ§  Decision Making**
- Better choices under uncertainty
- Avoiding common decision traps  
- Structured thinking frameworks

**ğŸ’¼ Professional Growth**
- Leadership and management thinking
- Strategic planning approaches
- Overcoming workplace cognitive biases

**ğŸ¯ Personal Development**
- Productivity and focus improvement
- Overcoming limiting beliefs
- Building confidence and resilience

**ğŸ’° Financial Thinking**
- Investment decision frameworks
- Risk assessment mental models
- Avoiding financial cognitive biases

### The Generation Process

**1. Input Your Goal**
Be specific about your challenge or desired growth area.

**2. AI Analysis**  
The system analyzes your goal for key themes, concepts, and learning objectives.

**3. Content Curation**
Relevant mental models and biases are selected from our comprehensive library.

**4. Roadmap Assembly**
Your personalized 5-7 step learning journey is created and presented.

**5. Immediate Access**
You''re taken directly to your new roadmap to begin learning.

### Optimization Tips

**ğŸ¯ One Clear Focus**
Each roadmap works best when focused on a single, specific area of growth.

**ğŸ“ Detailed Descriptions**
More context in your goal description leads to better AI matching.

**ğŸ”„ Multiple Roadmaps**
Complete one roadmap before creating another for maximum effectiveness.

### What Happens Next?

Once your roadmap is generated:
1. **Review Your Journey**: See the selected mental tools and their progression
2. **Start Learning**: Begin with the first step in your personalized sequence
3. **Trust the Process**: Each step builds on the previous ones

### Troubleshooting

**Roadmap seems irrelevant?** Try rewording your goal with more specific context.

**Too easy or too hard?** The difficulty balances automatically as you progress.

**Want to start over?** You can create a new roadmap anytime after completing your current one.

Remember: The best roadmap is the one you''ll actually follow. Make your goal personally meaningful and specific to your real-world challenges.', 
'{"category": "screen_help", "screen": "new_roadmap"}', 
true),

-- Unlocked Knowledge Screen Help
('unlocked-screen-help', 
'## Your Growing Knowledge Library

The **Unlocked Knowledge** screen is your personal library of mental models and cognitive biases you''ve mastered through completing roadmap steps. This is your expanding toolkit of thinking capabilities.

### What You''ll Find Here

**ğŸ§  Mental Models Library**
All the decision-making frameworks and thinking tools you''ve learned through your roadmaps, organized and searchable.

**ğŸ­ Cognitive Biases Collection**  
The thinking traps you''ve learned to recognize and avoid, with quick reference guides for each.

**ğŸ“š Detailed References**
Full explanations, examples, and application guidance for every concept you''ve unlocked.

### How Knowledge Gets Unlocked

**ğŸ† Completion-Based Access**
Mental models and biases become available in your library only after you''ve completed the full Learn â†’ Plan â†’ Reflect cycle for each one.

**ğŸ”„ Progressive Discovery**
Your library grows with each roadmap you complete, building a comprehensive thinking toolkit over time.

**ğŸ’ Quality Over Quantity**
Every item in your library represents genuine learning, not just exposure.

### Using Your Knowledge Library

**ğŸ” Quick Reference**
When facing real-world decisions, browse your library for relevant thinking tools you''ve already mastered.

**ğŸ“– Refresher Reading**
Revisit concepts you learned weeks or months ago to reinforce your understanding.

**ğŸ¯ Application Reminders**
Each entry includes practical guidance for applying the concept in various situations.

### Search and Organization

**ğŸ·ï¸ Categories**
- Decision-Making Frameworks
- Bias Recognition Tools  
- Strategic Thinking Models
- Personal Development Concepts

**ğŸ” Smart Search**
Find concepts by name, application area, or the situations where they''re useful.

**â­ Favorites** *(Coming Soon)*
Mark your most-used mental tools for quick access.

### Knowledge Compound Interest

**ğŸ“ˆ Network Effects**
As your library grows, mental models begin reinforcing and connecting with each other, creating more sophisticated thinking capabilities.

**ğŸ¯ Pattern Recognition**
You''ll start noticing when multiple concepts from your library apply to the same situation.

**ğŸ§  Automatic Application**
Well-learned models become intuitive, improving your thinking without conscious effort.

### Sharing Your Growth

**ğŸ’¬ Discussion Points**
Your unlocked knowledge gives you frameworks for deeper conversations and better advice to others.

**ğŸ“Š Progress Visualization**
See how your thinking capabilities have expanded since you started using LattixIQ.

**ğŸ“ Expertise Development**
Your growing library represents genuine expertise in rational thinking and decision-making.

### Premium Features *(Coming Soon)*

**ğŸ“‹ Custom Collections**
Organize your unlocked knowledge into topic-specific collections.

**ğŸ”— Advanced Connections**
See how your mental models relate to and reinforce each other.

**ğŸ“Š Usage Analytics**
Track which concepts you reference most often and when.

### Making the Most of Your Library

**ğŸ”„ Regular Reviews**
Periodically browse your library to keep concepts fresh in your mind.

**ğŸ¯ Real-World Application**
Before important decisions, check if any of your unlocked models might be helpful.

**ğŸ“ Continued Reflection**
Notice when you use library concepts in daily life and appreciate your growth.

### Troubleshooting

**Missing a concept?** Make sure you''ve completed the full reflection step for that roadmap item.

**Can''t find something?** Use the search function or browse by category.

Remember: This library represents your journey from knowing about thinking tools to actually owning and using them. Each unlocked item is a genuine addition to your cognitive capabilities.', 
'{"category": "screen_help", "screen": "unlocked"}', 
true),

-- General Help
('general-help', 
'## Welcome to LattixIQ - Your Rationality Toolkit

LattixIQ is designed to bridge the gap between knowing good ideas and actually applying them in your life. We''re here to help you build better thinking habits through proven mental models and cognitive bias awareness.

### How LattixIQ Works

**ğŸ¯ Goal-Driven Learning**
1. Tell us what you want to improve or overcome
2. Get a personalized roadmap of 5-7 relevant thinking tools
3. Follow the Learn â†’ Plan â†’ Reflect cycle for each concept
4. Build a library of mental tools you actually know how to use

**ğŸ§  The Science Behind It**
Our approach combines:
- **Spaced Repetition**: Concepts are revisited for better retention
- **Implementation Intentions**: Specific plans improve follow-through
- **Reflective Learning**: Journaling solidifies understanding
- **Progressive Unlocking**: Builds expertise systematically

### Core Features

**ğŸ—ºï¸ Personalized Roadmaps**
AI-generated learning paths tailored to your specific goals and challenges.

**ğŸ“š Mental Model Library**
100+ thinking frameworks used by the world''s best decision-makers.

**ğŸ­ Cognitive Bias Training**
Learn to recognize and avoid the systematic errors that affect all human thinking.

**ğŸ“ Application Log**
Your personal journal of growth, insights, and real-world applications.

**ğŸ  My Toolkit Hub**
Your central command center for tracking progress and accessing all features.

### Getting Started

**1. Create Your First Roadmap**
- Visit the "New Roadmap" screen
- Describe a specific challenge or growth goal
- Let our AI curate the perfect learning sequence

**2. Follow the Learning Process**
- **Learn**: Understand each mental tool deeply
- **Plan**: Create specific ways to apply it in your life
- **Reflect**: Journal about your real-world experience

**3. Build Your Toolkit**
- Complete each step to unlock the next one
- Watch your knowledge library grow
- Apply your expanding toolkit to new challenges

### Key Principles

**ğŸ¯ Application Over Theory**
We focus on practical tools you can actually use, not academic concepts you''ll forget.

**ğŸ”„ Process Over Perfection**
Consistent practice matters more than perfect execution. Progress, not perfection.

**ğŸ“Š Evidence-Based Approach**
Every mental model and technique is backed by research in psychology, neuroscience, or decision science.

**ğŸŒ± Growth Mindset**
Your thinking abilities can be developed. Every expert was once a beginner.

### Success Tips

**ğŸ“… Consistency Beats Intensity**
Regular, smaller learning sessions are more effective than sporadic marathon sessions.

**ğŸ¯ One Roadmap at a Time**
Complete your current learning journey before starting a new one for maximum effectiveness.

**ğŸ“ Honest Reflection**
Your journal entries are for you. Honest self-assessment accelerates growth.

**ğŸ”” Use Reminders Wisely**
Enable notifications for gentle nudges, but avoid overwhelming yourself.

### Free vs Premium

**Free Account Includes:**
- Your first complete roadmap (5-7 mental tools)
- Full Learn â†’ Plan â†’ Reflect experience
- Application log and progress tracking
- My Toolkit dashboard

**Premium Features** *(Coming Soon)*:
- Unlimited roadmaps for any goal
- Advanced personal insights and analytics
- Priority access to new mental models
- Enhanced search and organization tools

### Common Questions

**"How long does a roadmap take?"**
Most users complete a 5-7 step roadmap in 2-3 weeks, spending 2-3 days practicing each concept.

**"What if I don''t have time for daily practice?"**
Even 5-10 minutes of intentional application can be valuable. Quality matters more than quantity.

**"Can I skip steps or go out of order?"**
Steps are sequenced for optimal learning. We recommend following the order for best results.

### Need More Help?

- Check the help guide for each specific screen
- Review your Application Log for patterns in your learning
- Use the contact information in Settings if you encounter technical issues

### Your Learning Philosophy

Remember: The goal isn''t to become a walking encyclopedia of mental models. It''s to internalize a few powerful thinking tools so well that they become natural parts of how you approach life''s challenges.

Every decision you make, every problem you solve, every goal you pursue - these all become opportunities to apply your growing rationality toolkit.

Welcome to your journey toward clearer thinking and wiser choices. Let''s bridge that knowing-doing gap together.', 
'{"category": "screen_help", "screen": "general"}', 
true);

-- Create updated_at trigger for content_blocks if not exists
-- (This ensures the trigger exists even if run against an older database)
DO $$
BEGIN
    -- Check if trigger exists, create if it doesn't
    IF NOT EXISTS (
        SELECT 1 FROM pg_trigger 
        WHERE tgname = 'update_content_blocks_updated_at'
    ) THEN
        -- Create the trigger function if it doesn't exist
        CREATE OR REPLACE FUNCTION update_updated_at_column()
        RETURNS TRIGGER AS $func$
        BEGIN
            NEW.updated_at = NOW();
            RETURN NEW;
        END;
        $func$ language 'plpgsql';
        
        -- Create the trigger
        CREATE TRIGGER update_content_blocks_updated_at 
            BEFORE UPDATE ON content_blocks
            FOR EACH ROW 
            EXECUTE FUNCTION update_updated_at_column();
    END IF;
END $$;